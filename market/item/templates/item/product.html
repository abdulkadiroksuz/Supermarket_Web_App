{% extends 'layout.html' %}

{% block title %}
  {{ product.name }}
{% endblock %}

{% block content %}

{% load static %}
{% block additionalStyles %}
    <link rel="stylesheet" href="{% static 'css/product.css' %}" />
{% endblock %}

<main class="main-product">
  <div class="detail-wrap wrapper webwrap">
    <section class="detail-highlight">
      <img class="product-image" src="{{ product.image.url }}" alt="{{ product.name }} Image">
      <div class="highlight-info">
        <div class="pricetag info-price">Price: ${{product.price}}</div>
        <h1 class="info-title">{{ product.name }}</h1>
        {% if user.is_authenticated %}
        <!-- Example: Add a "Add to Cart" button if user is authenticated -->
        <form method="post" action="{% url 'cart:add_item_to_cart' %}">
            {% csrf_token %}
            <button type="submit">Add to Cart</button>
        </form>
        {% else %}
        <!-- Show login link if user is not authenticated -->
        <p><a href="#">Login</a> to add to cart</p>
        {% endif %}
      
      </div>
    </section>
    <aside class="detail-additions">
      <div class="additions-section additions-info">
        <h2 class="section-title">Descriptions</h2>
        <div id="section-content" class="section-content">
          <div class="info-description wysiwyg">
            <p class="detail-additions">{{ product.description }}</p>
          </div>
          <div class="info-data">
            <p class="detail-additions">Product ID: {{product.id}}</p>
            {% if stock_status == "In Stock" and not isRunningOut %}
            <p id="inStock" class="detail-additions">{{stock_status}}</p>
            {% elif isRunningOut and stock == 1 %} 
            <p id="isRunningOut" class="detail-additions">Hurry up! {{stock}} product left.</p>
            {% elif isRunningOut%} 
            <p id="isRunningOut" class="detail-additions">Hurry up! {{stock}} products left.</p>
            {% else %}
            <p id="outOfStock" class="detail-additions">{{stock_status}}</p>
            {% endif %}
          </div>
        </div>
      </div>
    </aside>
  </div>
</main>




{% endblock %}